<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/stylesheets/styles.css">
    <title>Documentation</title>
</head>
<body>
    
    <div class="container" id="top">
        <div><a href="/"><button>Retour sur la page d'accueil</button></a></div>
        <h1>Documentation</h1>

        <p>Seules les personnes qui ont cr√©√© un compte utilisateur peuvent, en √©tant connect√©es, 
        faire des actions sur la base de donn√©es.</p>
        <p>Avant de pouvoir naviguer sur le serveur <code>http://localhost:8080/</code> il faut donc se connecter.</p>

        <h2>Sommaire</h2>
        <ul id="summary">
            <div><a href="#about" class="bold">Vue d'ensemble</a></div>
            <div><a href="#tutoriel" class="bold">Tutoriel</a></div>
        <ul>
            <li><a href="#creation">Cr√©er un compte utilisateur</a></li>
            <li><a href="#login">Se connecter</a></li>
            <li><a href="#token">Authentification et utilisation du Token</a></li>
            <li><a href="#user-delete">Supprimer un utilisateur</a></li>
            <li><a href="#catway-add">Cr√©er un Catway</a></li>
            <li><a href="#catway-patch">Modifier un Catway</a></li>
            <li><a href="#catway-delete">Supprimer un Catway</a></li>
            <li><a href="#reservation-add">Cr√©er une R√©servation</a></li>
            <li><a href="#reservation-delete">Supprimer une R√©servation</a></li>
        </ul>
            <div><a href="#examples" class="bold">Exemples</a></div>
            <div><a href="#glossaire" class="bold">Glossaire</a></div>
        </ul>
        <h2 id="about">‚öìÔ∏è Vue d'ensemble</h2>
        <p>Application web de gestion des r√©servations de catway (petit appontement pour amarrer un bateau) du port de plaisance de Russell.</p>
        <p>Elle permet la capitainerie de consulter, ajouter, modifier ou supprimer des catways ainsi que leurs r√©servations</p>
        <p>L'application repose sur une architecture RESTful API REST et utilise le serveur Express. Les donn√©es sont stock√©es dans MongoDB. L'Authentification est g√©r√©e via JWT.</p>

        <div><a href="#top"><button class="btn-top">Remonter en haut de la page</button></a></div>

        <h2 id="tutoriel">ü¶∫ Tutoriel</h2>
        <h3 id="creation">Cr√©er un utilisateur</h3>
        <p>Sur Postman, faire un POST de <code>http://localhost:8080/auth/register</code>. </p>
        <p> Compl√©ter dans Body > x-www-form-urlencoded un name, email et password.</p> 
        <p>Cliquer sur Send. Un message de confirmation s‚Äôaffiche.</p>
        <img src="/images/creation.jpg" alt="Cr√©ation d'un utilisateur sur Postman">    

        <div><a href="#top"><button class="btn-top">Remonter en haut de la page</button></a></div>
       
        <h3 id="login">Se connecter √† un compte utilisateur</h3>
        <p>Sur Postman, faire un POST de <code>http://localhost:8080/auth/login</code>.</p>
        <p>Compl√©ter dans Body > x-www-form-urlencoded un name, email et password.</p>
        <p>Cliquer sur Send.</p>
        <p>Un token s‚Äôaffiche. <b>Copier le token.</b></p>
        <img src="/images/connexion.jpg" alt="Connexion d'un utilisateur sur Postman">

        <div><a href="#top"><button class="btn-top">Remonter en haut de la page</button></a></div>

        <h3 id="token">Authentification et Token</h3>
        <p>Une fois le token copi√©, faire un GET de <code>http://localhost:8080/catways</code>.</p>
        <p>Puis dans l‚Äôonglet ¬´¬†Authorization¬†¬ª, s√©lectionnez Bearer Token et collez le token dans la case :</p>
        <img src="/images/token.jpg" alt="Exemple de token g√©n√©r√©">       
        <p>Un code 200 s‚Äôaffiche -> √ßa fonctionne, vous pouvez maintenant agir sur la base de donn√©es.</p>

        <div><a href="#top"><button class="btn-top">Remonter en haut de la page</button></a></div>

        <h3 id="user-delete">Suppression d'un utilisateur</h3>
        <p>Faire un DELETE de <code>http://localhost:8080/users/delete/IDUSER</code>.</p>
        <p>Le IDUSER est √† r√©cup√©rer dans la base de donn√©es.</p>
        <img src="/images/suppression-user-compass.jpg" alt="Suppression via Compass">
        <img src="/images/suppression-user-postman.jpg" alt="Suppression via Postman">
        <p>Cliquer sur Send.</p>
        <img src="/images/suppression-user-confirm.jpg" alt="Confirmation de suppression">

        <div><a href="#top"><button class="btn-top">Remonter en haut de la page</button></a></div>

        <h3 id="catway-add">Cr√©er un catway</h3>
        <p>Faire un POST de <code>http://localhost:8080/catways/add</code>.</p>
        <p>Compl√©tez les 3 champs : 
            <ul>
                <li><b>catwayNumber</b> (doit √™tre un num√©ro unique)</li>
                <li><b>type</b> ["long" ou "short"] avec une tol√©rance pour la casse</li>
                <li><b>catwayState</b> maximum 100 caract√®res de long</li>
            </ul>
        </p>
        <p>Cliquez sur Send. Le message Catway ajout√© avec succ√®s ! s‚Äôaffiche avec le r√©capitulatif de l‚Äôobjet qui vient d‚Äô√™tre cr√©√©.</p>
        <img src="/images/catway-add.jpg" alt="Ajout d'un catway">

        <div><a href="#top"><button class="btn-top">Remonter en haut de la page</button></a></div>

        <h3 id="catway-patch">Modifier un catway</h3>
        <p>R√©cup√©rer l'ID d'un catway sur MongoDB dans le r√©pertoire catways ou sur la page /catways/list. Copier l'ID.</p>
        <p>Faire un PATCH de <code>http://localhost:8080/catways/IDNUMBER</code></p>
        <p>Avec le ou les 3 champs modifi√©s : 
            <ul>
                <li><b>catwayNumber</b> (doit √™tre un num√©ro unique)</li>
                <li><b>type</b> ["long" ou "short"] avec une tol√©rance pour la casse</li>
                <li><b>catwayState</b> maximum 100 caract√®res de long</li>
            </ul>
        </p>
        <p>Cliquer sur Send.</p>
        <img src="/images/catway-patch.jpg" alt="Mise √† jour d'un catway">

        <div><a href="#top"><button class="btn-top">Remonter en haut de la page</button></a></div>

        <h3 id="catway-delete">Supprimer un catway</h3>
        <p>R√©cup√©rer l'ID d'un catway sur MongoDB dans le r√©pertoire catways ou sur la page /catways/list. Copier l'ID.</p>
        <p>Faire un DELETE de <code>http://localhost:8080/catways/IDCATWAY</code>.</p>
        <img src="/images/catway-delete.jpg" alt="Suppression d'un catway">

        <div><a href="#top"><button class="btn-top">Remonter en haut de la page</button></a></div>

        <h3 id="reservation-add">Cr√©er une r√©servation</h3>
        <p>R√©cup√©rer l'ID d'un catway sur MongoDB dans le r√©pertoire catways ou sur la page /catways/list. Copier l'ID.</p>
        <p>Faites un POST de <code>http://localhost:8080/catways/IDNUMBER/reservations</code>.</p>
        <p>Compl√©tez les 4 champs : 
                <ul>
                    <li><b>clientName</b> (doit √™tre un num√©ro unique)</li>
                    <li><b>boatName</b> maximum 50 caract√®res de long</li>
                    <li><b>checkIn</b> et <b>checkIn</b> : date sous le format ISO 8601 (YYYY-MM-DDT10:00:00Z)</li>
                </ul>
        </p>
        <p>Cliquez sur Send. La r√©servation est cr√©√©e sur le catway dont l'id est indiqu√© dans l'url.</p>

        <div><a href="#top"><button class="btn-top">Remonter en haut de la page</button></a></div>
                
        <h3 id="reservation-delete">Supprimer une r√©servation</h3>
        <p>R√©cup√©rer l'ID d'une r√©servation, 2 possibilit√©s :
            <ul>
                <li>Sur MongoDB dans le r√©pertoire reservations.</li>
                <li>Sur le serveur sur la page /reservations/list</li>
            </ul></p>
            <img src="/images/reservation-list.jpg" alt="R√©cup√©rer l'ID d'une r√©servation sur le navigateur">
        <p>Sur Postman, faire un DELETE de <code>http://localhost:8080/reservations/IDRESERVATION</code> avec les champs n√©cessaires.</p>
        <img src="/images/reservation-delete.jpg" alt="Supression d'une r√©servation sur postman">
        <p>Sur le serveur, entrer l'ID de la r√©servation et cliquer sur le bouton Supprimer </p>
        <img src="/images/reservation-delete-server.jpg" alt="Supression d'une r√©servation sur le navigateur">

        <div><a href="#top"><button class="btn-top">Remonter en haut de la page</button></a></div>

        <h2 id="examples">ü§î Exemples</h2>
        <ul>
            <li><strong>Sc√©nario 1</strong> : V√©rifier la liste des r√©servations de la journ√©e avant l'arriv√©e des bateaux</li>
            <p>Sur Postman, faire un GET de <code>http://localhost:8080/reservations</code>. <br>
                Filtrer les r√©sultats dans "Params" avec checkIn et la date en format AAA-MM-JJ pour voir les bateaux qui arrivent un jour pr√©cis.</p>
            <img src="/images/reservation-postman-checkin.jpg" alt="Filtre checkin reservations sur postman">
            <p>Sur le serveur, cliquer sur Consulter les listes > üìÜ Liste des R√©servations.</p>

            <li><strong>Sc√©nario 2</strong> : Un orage a endommag√© certains catways.</li>
            <p>Sur Postman, faire un PATCH de <code>http://localhost:8080/catways/IDCATWAY</code>, avec en Key "catwayState" et en Value "En maintenance".</p> 
            <p>Sur le serveur, aller sur le tableau de bord > Gestion des catways > Modifier un catway. Entrer l'ID du catway et son nouveau √©tat dans le champ.</p>

            <li><strong>Sc√©nario 3</strong> : Un employ√© a √©t√© mut√©, il faut supprimer l'utilisateur pour √©viter des probl√®mes de s√©curit√©.</li>
            <p>Sur Postman, faire un GET de <code>http://localhost:8080/users</code> pour v√©rifier tous les utilisateurs existants.<br>
                R√©cup√©rer l'ID de l'utilisateur souhait√© pour faire un DELETE <code>http://localhost:8080/users/delete/IDUSER</code>.<br>
                Un message de confirmation s'affiche. On peut v√©rifier la suppression en refaisant un GET de <code>http://localhost:8080/users</code>.</p> 
            <p>Sur le serveur, aller sur le tableau de bord > Gestion des utilisateurs > Supprimer un utilisateur. Entrer l'ID de l'utilisateur et cliquer sur Supprimer.</p>
        </ul>
        


        <h2 id="glossaire">üìñ Glossaire</h2>
        <p>Liste alphab√©tique des termes sp√©cifiques du projet.</p>
        <ul class="glossaire"> 
            <strong>Concepts m√©tier</strong>
        <ul> 
            <li><strong>Catway</strong> : Emplacement destin√© √† l'amarrage d‚Äôun bateau. Il est identifi√© par un ID unique au sein de la base de donn√©es.</li> 
            <li><strong>Check-In, Check-Out</strong> : Date et heure pr√©vues d‚Äôarriv√©e et de d√©part du bateau au catway (format ISO <code>YYYY-MM-DDTHH:mm:ssZ</code>).</li> 
            <li><strong>√âtat du Catway</strong> : Indicateur de l'√©tat du catway (ex. <code>Libre</code>, <code>Occup√©</code>, <code>R√©serv√©</code>, <code>En maintenance</code>).</li> 
            <li><strong>Ponton</strong> : Portion de quai flottant qui peut √™tre associ√©e √† plusieurs catways.</li> 
            <li><strong>Type de Catway</strong> : Cat√©gorie du catway, pouvant √™tre <code>long</code> ou <code>short</code>, d√©finissant la taille des bateaux qu'il peut accueillir.</li> 
            <li><strong>Utilisateur</strong> : Personne qui a l'autorisation de se connecter √† l'application pour consulter, ajouter, modifier ou supprimer des autres utilisateurs, des catways et des r√©servations.</li> 
        </ul>
        </ul>
        <ul class="glossaire"> 
            <strong>Outils techniques</strong>
        <ul> 
            <li><strong>API REST</strong> (Representational State Transfer) : Architecture permettant la communication entre le frontend et le backend via des requ√™tes HTTP (<code>GET</code>, <code>POST</code>, <code>PATCH</code>, <code>DELETE</code>).</li> 
            <li><strong>Express.js</strong> : Framework backend pour Node.js permettant de cr√©er des applications web et APIs rapidement avec un syst√®me de routage et de gestion des requ√™tes HTTP.</li> 
            <li><strong>Fetch API</strong> : M√©thode JavaScript utilis√©e c√¥t√© frontend pour envoyer des requ√™tes HTTP √† l'API backend.</li> 
            <li><strong>JSON</strong> (JavaScript Object Notation) : Format d‚Äô√©change de donn√©es utilis√© entre le frontend et le backend.</li> 
            <li><strong>Middleware</strong> : Fonction interm√©diaire dans Express.js utilis√©e pour g√©rer la s√©curit√©, la validation et les autorisations.</li> 
            <li><strong>MongoDB</strong> : Base de donn√©es NoSQL orient√©e documents utilis√©e pour stocker les catways et les r√©servations.</li> 
            <li><strong>MongoDB Compass</strong> : Interface graphique permettant de visualiser, manipuler et interagir avec les donn√©es stock√©es dans MongoDB sans passer par la ligne de commande.</li> 
            <li><strong>Mongoose</strong> : ODM (*Object Data Modeling*) pour MongoDB permettant d'interagir avec la base en utilisant des sch√©mas et des mod√®les JavaScript.</li> 
            <li><strong>Postman</strong> : Outil permettant de tester les requ√™tes API (<code>GET</code>, <code>POST</code>, <code>DELETE</code>, etc.) et de simuler les interactions avec le backend sans passer par l'interface utilisateur.</li> 
            <li><strong>Token JWT</strong> (JSON Web Token) : Jeton de s√©curit√© utilis√© pour authentifier et autoriser les utilisateurs √† effectuer des actions sur l'API.</li> 
        </ul>
        </ul>
        <div><a href="#top"><button class="btn-top">Remonter en haut de la page</button></a></div>
    </div>
</body>
</html>
